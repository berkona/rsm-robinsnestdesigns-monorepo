{
  "version": 2,
  "name": "robins-nest-designs",
  "alias": ["robins-nest-designs.berkona.now.sh"],
  "regions": [ "iad1" ],
  "env": {
    "SQL_ENGINE": "mysql",
    "SQL_HOST": "@sql-host",
    "SQL_PORT": "@sql-port",
    "SQL_USER": "@sql-user",
    "SQL_PWD": "@sql-password",
    "SQL_DB": "@sql-db",
    "PAYPAL_CLIENTID": "@paypal-client-id",
    "PAYPAL_CLIENTSECRET": "@paypal-client-secret-sandbox",
    "API_URL": "@api-url",
    "JWT_SECRET": "@jwt-secret",
    "JWT_ISSUER": "@jwt-issuer",
    "JWT_MAX_AGE": "@jwt-max-age",
    "AWSAccessKeyId": "@awsaccesskeyid",
    "AWSSecretKey": "@awssecretkey",
    "AWSUploadBucket": "@awsuploadbucket"
  },
  "builds": [
    { "src": "www/next.config.js", "use": "@now/next" },
    { "src": "api/handler.js", "use": "@now/node" }
  ],
  "routes": [
    { "src": "/graphql", "dest": "api/handler.js" },
    {
      "src": "/",
      "dest": "/www/",
      "headers": {
        "cache-control": "s-maxage=300, max-age=0"
      }
    },
    {
      "src": "/product/(?<productId>[^/]+).*$",
      "dest": "/www/product?productId=$productId",
      "headers": {
        "cache-control": "s-maxage=300, max-age=0"
      }
    },
    { "src": "/category/(?<categoryId>[^/]+).*$", "dest": "/www/category?categoryId=$categoryId" },
    {
      "src": "/order/(?<orderId>[^/]+).*$",
      "dest": "/www/order?orderId=$orderId",
      "headers": {
        "cache-control": "s-maxage=300, max-age=0"
      }
    },
    {
      "src": "/search.*$",
      "dest": "/www/search",
      "headers": {
        "cache-control": "s-maxage=300, max-age=0"
      }
    },
    {
      "src": "/admin/product-details/(?<productId>[^/]+).*$",
      "dest": "/www/admin/product-details?productId=$productId"
    },
    {
      "src": "/admin/category-details/(?<categoryId>[^/]+).*$",
      "dest": "/www/admin/category-details?categoryId=$categoryId"
    },
    {
      "src": "/googlea7696e4bbcfecd2f.html",
      "dest": "/www/static/googlea7696e4bbcfecd2f.html",
      "headers": { "cache-control": "immutable" }
    },
    {
      "src": "/_next/static/(?:[^/]+/pages|chunks|runtime)/.+",
      "headers": { "cache-control": "immutable" }
    },
    {
      "src": "/(.*)",
      "dest": "/www/$1",
      "headers": {
        "x-request-path": "$1"
      }
    }
  ]
}
